<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eat Planner Privacy Policy</title>
    <style>
      :root {
        color-scheme: light;
      }

      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        line-height: 1.6;
        color: #2f241c;
        background: #faf6f1;
      }

      main {
        max-width: 860px;
        margin: 0 auto;
        padding: 32px 20px 56px;
      }

      .card {
        background: #fff;
        border: 1px solid #e8ddd0;
        border-radius: 14px;
        padding: 18px;
      }

      .card p {
        margin: 0;
      }

      h1,
      h2 {
        line-height: 1.25;
        color: #20160f;
      }

      h1 {
        margin: 0 0 8px;
      }

      h2 {
        margin-top: 28px;
      }

      ul {
        padding-left: 22px;
      }

      .muted {
        color: #6b5a4b;
      }

      a {
        color: #7a3f1f;
      }
      body.show-pwa-close {
        padding-top: 54px;
      }
      .pwa-close-bar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 54px;
        display: none;
        align-items: center;
        justify-content: space-between;
        padding: 0 14px;
        border-bottom: 1px solid #e8ddd0;
        background: #fffaf5;
        box-sizing: border-box;
      }
      .pwa-close-bar__title {
        font-size: 14px;
        color: #5a493b;
      }
      .pwa-close-bar__button {
        appearance: none;
        width: 34px;
        height: 34px;
        border: 1px solid #d9c8b6;
        border-radius: 999px;
        background: #fff;
        color: #5a493b;
        font-size: 20px;
        line-height: 1;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="pwa-close-bar" id="pwa-close-bar">
      <div class="pwa-close-bar__title">Privacy Policy</div>
      <button class="pwa-close-bar__button" id="pwa-close-button" aria-label="Close page">x</button>
    </div>
    <main>
      <h1>Privacy Policy for Eat Planner</h1>
      <p class="muted">Last updated: February 28, 2026</p>
      <div class="card">
        <p>
          This Privacy Policy explains what data Eat Planner processes and where it is stored.
        </p>
      </div>

        <h2>1. Overview</h2>
        <p>
          Eat Planner is a nutrition planning tool. It is designed so your food, goals,
          and planning data stay under your control.
        </p>

        <h2>2. Data We Process</h2>
        <p>The app can process the following data that you enter:</p>
        <ul>
          <li>Food items, nutrition values, stock, and optional prices.</li>
          <li>Optional photos you submit for nutrition label or food recognition.</li>
          <li>Nutrition goals and planner constraints.</li>
          <li>Export/import payloads created by the app.</li>
        </ul>

        <h2>3. Where Data Is Stored</h2>
        <ul>
          <li>
            <strong>Default app data:</strong> Food data, goals, history, and settings are stored
            locally in your browser storage (<code>localStorage</code>) and can be exported.
          </li>
          <li>
            <strong>Local file/clipboard:</strong> If you use export or import, your default app data
            is written to local files or the clipboard as part of that manual action.
          </li>
          <li>
            <strong>3rd-party service credentials:</strong> Google Drive authentication token and API keys (OpenAI, Gemini)
            are stored locally in your browser and are excluded from local file/clipboard export,
            or Google Drive sync.
          </li>
          <li>
            <strong>Google Drive sync:</strong> If you connect Google Drive,
            the app stores a backup JSON file in your Google Drive
            <code>appDataFolder</code>.
          </li>
        </ul>

        <h2>4. AI API Use (OpenAI and Gemini)</h2>
        <p>
          If enabled by you, the app sends the image and prompt directly from your browser to the chosen
          API provider (OpenAI or Google Gemini) using your respective API key to extract nutrition details.
        </p>
        <p>
          The app does not route this data through a developer-operated server.
        </p>
        <p>
          Photos are not stored by the app locally after they are sent for recognition.
        </p>
        <p>
          Please note that Google Gemini's <b>Free Tier</b> may use your data for model improvement as per their
          <a href="https://ai.google.dev/gemini-api/terms#free-tier-data-usage" target="_blank" rel="noreferrer">Terms of Service</a>.
        </p>

        <h2>5. Google User Data and API Scope</h2>
        <p>
          If enabled by you, the app uses Google Drive scope
          <code>https://www.googleapis.com/auth/drive.appdata</code> to read and write
          only the app's own backup file in <code>appDataFolder</code>.
        </p>
        <p>
          The app does not request broad file access and does not read or modify other
          Drive files.
        </p>

        <h2>6. Data Sharing</h2>
        <p>
          The app developer does not receive your data by default. Data is not
          transmitted to a developer-operated backend as part of normal app use.
        </p>
        <p>
          Data may be shared only when you explicitly export, copy, or upload it using
          services you choose.
        </p>

        <h2>7. Data Retention and Deletion</h2>
        <ul>
          <li>Local data remains in your browser until you clear it or overwrite it.</li>
          <li>
            Google Drive backup remains until you delete it from your Drive app data or
            overwrite it from the app.
          </li>
          <li>
            You can delete local data by clearing browser storage for this site.
          </li>
        </ul>

        <h2>8. Security</h2>
        <p>
          The app uses OAuth for Google authentication and stores tokens in browser
          runtime state.
        </p>
        <p>
          OpenAI and Gemini API keys are stored only in your browser storage and requests are sent directly
          from your browser to the respective providers.
        </p>
        <p>
          No internet-facing system is perfectly secure, but the app follows a minimal
          data-access approach and least-privilege API scope.
        </p>

        <h2>9. Open Source and Auditability</h2>
        <p>
          The app source code is publicly auditable on GitHub:
          <a href="https://github.com/quark-zju/EatPlanner">
            https://github.com/quark-zju/EatPlanner
          </a>
        </p>

        <h2>10. Policy Updates</h2>
        <p>
          This policy may be updated as the app changes. The "Last updated" date will be
          revised when updates are made.
        </p>

        <h2>11. Contact</h2>
        <p>
          For questions about this Privacy Policy, use <a href="https://github.com/quark-zju/EatPlanner/issues">GitHub issues</a> to contact the project maintainer.
        </p>

        <h2>12. Google API Services Disclosure</h2>
        <p>
          Eat Planner's use and transfer of information received from Google APIs will
          adhere to the
          <a href="https://developers.google.com/terms/api-services-user-data-policy">Google API Services User Data Policy</a>, including the Limited Use requirements.
        </p>
        <h2>13. Third-Party AI Services Disclosure</h2>
        <p>
          If you use the photo nutrition feature, your use of OpenAI or Google Gemini services is subject
          to the respective provider's terms and privacy policies:
        </p>
        <ul>
          <li>
            <strong>OpenAI:</strong>
            <a href="https://openai.com/policies/terms-of-use" target="_blank" rel="noreferrer">Terms of Use</a> and
            <a href="https://openai.com/policies/privacy-policy" target="_blank" rel="noreferrer">Privacy Policy</a>.
          </li>
          <li>
            <strong>Google Gemini:</strong>
            <a href="https://ai.google.dev/gemini-api/terms" target="_blank" rel="noreferrer">Gemini API Additional Terms of Service</a> and
            <a href="https://developers.google.com/terms" target="_blank" rel="noreferrer">Google APIs Terms of Service</a>.
          </li>
        </ul>
    </main>
    <script>
      (() => {
        const isStandalone =
          window.matchMedia("(display-mode: standalone)").matches ||
          Boolean(window.navigator.standalone);
        const hasBackHistory = window.history.length > 1;
        if (!isStandalone || hasBackHistory) return;

        document.body.classList.add("show-pwa-close");
        const bar = document.getElementById("pwa-close-bar");
        const closeButton = document.getElementById("pwa-close-button");
        if (!bar || !closeButton) return;
        bar.style.display = "flex";
        closeButton.addEventListener("click", () => {
          const sameOriginReferrer = document.referrer.startsWith(window.location.origin);
          if (sameOriginReferrer && window.history.length > 1) {
            window.history.back();
            return;
          }
          window.location.assign("/");
        });
      })();
    </script>
  </body>
</html>
